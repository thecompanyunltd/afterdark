<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="refresh" content="0;url=cummingsoon.html">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gay After Dark - Grindr Style Game</title>
    <style>
        :root {
            --grindr-yellow: #fcc007;
            --grindr-blue: #6fbddd;
            --grindr-dark: #2d2a29;
            --grindr-teal: #507a7c;
            --grindr-red: #de3a3b;
            --grindr-purple: #b793c4;
            --grindr-navy: #485b90;
            --grindr-pink: #aa305c;
        }
        
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-image: url(Untitled\ design.jpg);
            background-size: cover;
            color: white;
            margin: 0;
            padding: 0;
            height: auto;
            overflow: auto;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background-color: var(--grindr-dark);
            background-image: url(after-dark-banner.jpg);
            background-blend-mode:lighten;
            background-size: contain;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--grindr-yellow);
        }
        
        .header h1 {
            color: var(--grindr-yellow);
            margin: 0;
            font-size: 24px;
        }
        
        .header-controls {
            display: flex;
            gap: 15px;
        }
        
        .header-btn {
            background-color: var(--grindr-blue);
            color: black;
            border: none;
            padding: 8px 15px;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .header-btn:hover {
            background-color: var(--grindr-yellow);
        }
        
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .sidebar {
            width: 250px;
            margin-top: 40px;
            margin-left: 10px;
            height: auto;
            background-color: rgb(0, 0, 0);
            padding: 15px;
            overflow-y: auto;
            border-radius: 10px;
            margin-bottom: 200px;
        }
        
        .sidebar-section {
            margin-bottom: 20px;
        }
        
        .sidebar-title {
            color: var(--grindr-yellow);
            font-size: 16px;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #000000;
        }
        
        .profile-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .profile-list-item {
            padding: 10px;
            margin-bottom: 8px;
            background-color: #1a1a1a;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .profile-list-item:hover {
            background-color: #333;
        }
        
        .profile-name {
            font-weight: bold;
            color: var(--grindr-blue);
        }
        
        .profile-status {
            font-size: 12px;
            color: #aaa;
        }
        
        .content-area {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            
        }
        
        .game-title {
            color: var(--grindr-yellow);
            margin: 0 10px 20px 0;
            font-size: 22px;
            background-color: black;
            padding: 15px;
            border-radius: 10px;
            margin-right: auto;
        }
        
        .profile-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
           
        }
        
        .profile-card {
            background-color: var(--grindr-dark);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            aspect-ratio: 1/1;
            transition: all 0.3s;
            box-shadow: 0 4px 3px rgba(0,0,0,0.3);
            height: auto;
        }
        
        .profile-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.4);
        }
        
        .profile-img {
            width: 100%;
            height: 80%;
            object-fit: cover
        }
        
        .profile-info {
            padding: 8px;
            
        }
        
        .profile-name-card {
            font-weight: bold;
            color: white;
            margin-bottom: 0%;
        }
        
        .profile-age {
            color: var(--grindr-blue);
            font-size: 14px;
        }
        
        .profile-tag {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: var(--grindr-yellow);
            color: black;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            padding: 15px;
            background-color: var(--grindr-dark);
            border-radius: 10px;
        }
        
        .game-btn {
            background-color: var(--grindr-blue);
            color: black;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 150px;
        }
        
        .game-btn:hover {
            background-color: var(--grindr-yellow);
            transform: translateY(-2px);
        }
        
        .game-btn:disabled {
            background-color: #444;
            color: #777;
            cursor: not-allowed;
        }
        
        .game-results {
            background-color: var(--grindr-dark);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            min-height: 80px;
            border: 1px solid var(--grindr-yellow);
        }
        
        .result-text {
            color: white;
            font-size: 18px;
        }
        
        /* New flash animation */
        .flash {
            animation: flash 0.1s;
        }
        
        @keyframes flash {
            0% { background-color: var(--grindr-dark); }
            50% { background-color: var(--grindr-yellow); }
            100% { background-color: var(--grindr-dark); }
        }
        
        /* Big selection popup */
        .selection-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--grindr-dark);
            border: 3px solid var(--grindr-yellow);
            border-radius: 15px;
            padding: 30px;
            z-index: 1000;
            text-align: center;
            max-width: 80%;
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
        }
        
        .selection-title {
            color: var(--grindr-yellow);
            font-size: 28px;
            margin-bottom: 15px;
        }
        
        .selection-name {
            font-size: 36px;
            color: white;
            margin: 20px 0;
        }
        
        .selection-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .popup-btn {
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            border: none;
        }
        
        .challenge-btn {
            background-color: var(--grindr-blue);
            color: black;
        }
        
        .close-btn {
            background-color: var(--grindr-teal);
            color: white;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.7);
            z-index: 999;
        }
        
        /* Add to existing highlight class */
        .highlight {
            animation: highlight 0.5s infinite alternate, flash 0.5s 3;
        }
        .unk-btn{
            padding: 10px;
            margin-bottom: 8px;
            background-color: #8b0000d7;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .logo{
            max-width: 200px;
            position: absolute;
            top: 700px;;
            bottom: 5px;
            left: 50px;
        }

/* Reveal Game styles */
.option-btn {
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
    border: none;
}

.option-btn:disabled {
    opacity: 1;
    color: white;
    transform: scale(1);
}

.option-btn.correct {
    background-color: var(--grindr-teal) !important;
}

.option-btn.incorrect {
    background-color: var(--grindr-red) !important;
}

#selectionControls {
    animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
    </style>
</head>
<body>
    <img class="logo" src="Adobe Express - file.png">
    <div class="main-container">
        <div class="sidebar">
            <div class="sidebar-section">
                <h3 class="sidebar-title">Nearby</h3>
                <ul class="profile-list">
                    <li class="profile-list-item">
                        <div class="profile-name">G,G & G</div>
                        <div class="profile-status">Busy at Games Night</div>
                    </li>
                </ul>
            </div>
            
            <div class="sidebar-section">
                <h3 class="sidebar-title">Who's Nearby</h3>
                <ul class="profile-list">
                    <li class="profile-list-item">
                        <div class="profile-name">Christoff Viewed You</div>
                    </li>
                    <li class="profile-list-item">
                        <div class="profile-name">Franco</div>
                        <div class="profile-status">Active in Right Now</div>
                    </li>
                    <li class="profile-list-item">
                        <div class="profile-name">Schalk vir Vleis</div>
                        <div class="profile-status">Online</div>
                    </li>
                </ul>
            </div>
            
            <div class="sidebar-section">
                <h3 class="sidebar-title">Game Options</h3>
                <ul class="profile-list">
                    <li class="profile-list-item" id="spinBottlePart1Btn">Choose Asker</li>
                    <li class="profile-list-item" id="spinBottlePart2Btn">Choose Victim</li>
                    <li class="profile-list-item" id="randomPickerBtn">Random Picker</li>
                    <li class="profile-list-item" id="randomTaskBtn">Random Task Generator</li>
                    <li class="profile-list-item" id="revealGameBtn">Partner Game</li>
                    <li class="profile-list-item" id="resetGameBtn">Reset Game</li>
                    <li class="unk-btn" id="switchBtn">Reveal Spicey</li>
                </ul>
            </div>
        </div>
        
        <div class="content-area">
            <h2 class="game-title">Browse Nearby</h2>
            
            <div class="profile-grid" id="profileGrid">
                <!-- Profiles will be generated by JavaScript -->
            </div>
        </div>
    </div>
    <script>
        // Spicy reveal functionality
const spicyPhotos = {
    1: "pics/FrancoSNude.jpeg", // Replace with actual spicy photo paths
    2: "pics/LiamNude.jpg",
    3: "pics/ChristoffNude.jpg",
    4: "pics/ChristiaanNude.jpg",
    5: "pics/Schalk.jpg",
    6: "pics/UliNude.jpg",
    7: "pics/PaulNude.jpg",
    8: "pics/RobbieNude.jpg"
};

let lastRevealTime = 0;
const revealCooldown = 0.01 * 60 * 1000; // 5 minutes in milliseconds

function showPlayerSelection() {
    const popup = document.createElement('div');
    popup.className = 'selection-popup';
    popup.innerHTML = `
        <div class="selection-title">Reveal Spicey</div>
        <div style="color: white; margin-bottom: 15px;">Choose who to reveal:</div>
        <div class="selection-buttons" style="flex-direction: column; gap: 10px;">
            ${profiles.map(profile => `
                <button class="popup-btn" data-id="${profile.id}" 
                    style="width: 100%; text-align: center;">
                    ${profile.name}
                </button>
            `).join('')}
            <button class="popup-btn challenge-btn" id="revealAllBtn" 
                style="width: 100%; text-align: center; margin-top: 10px;">
                Reveal All
            </button>
            <button class="popup-btn close-btn" id="cancelRevealBtn" 
                style="width: 100%; text-align: center;">
                Cancel
            </button>
        </div>
    `;
    
    const overlay = document.createElement('div');
    overlay.className = 'overlay';
    
    document.body.appendChild(overlay);
    document.body.appendChild(popup);
    
    // Add event listeners to all player buttons
    profiles.forEach(profile => {
        document.querySelector(`.popup-btn[data-id="${profile.id}"]`).addEventListener('click', () => {
            overlay.remove();
            popup.remove();
            setupCardSelection(profile.id);
        });
    });
    
    // Add event listener for reveal all
    document.getElementById('revealAllBtn').addEventListener('click', () => {
        overlay.remove();
        popup.remove();
        revealAllSpicy();
    });
    
    // Add event listener for cancel
    document.getElementById('cancelRevealBtn').addEventListener('click', () => {
        overlay.remove();
        popup.remove();
    });
}

function setupCardSelection(profileId) {
    const profile = profiles.find(p => p.id === profileId);
    if (!profile) return;
    
    const popup = document.createElement('div');
    popup.className = 'selection-popup';
    popup.style.pointerEvents = 'none'; // Make popup click-through
    popup.innerHTML = `
        <div class="selection-title">Reveal Spicey</div>
        <div style="color: white; margin-bottom: 15px; background-color: rgba(0,0,0,0.7); padding: 10px; border-radius: 10px;">
            Tap on ${profile.name}'s profile card to reveal their spicy photo!
        </div>
    `;
    
    const overlay = document.createElement('div');
    overlay.className = 'overlay';
    overlay.style.pointerEvents = 'none'; // Make overlay click-through
    
    document.body.appendChild(overlay);
    document.body.appendChild(popup);
    
    // Highlight the target profile card
    const targetCard = document.querySelector(`.profile-card[data-id="${profileId}"]`);
    if (targetCard) {
        targetCard.classList.add('highlight');
        targetCard.style.zIndex = '1001'; // Bring above overlay
        targetCard.style.position = 'relative'; // Needed for z-index to work
    }
    
    // Set up card click handler
    function cardClickHandler(e) {
        const card = e.target.closest('.profile-card');
        if (card && parseInt(card.dataset.id) === profileId) {
            revealSpicyPhoto(profileId);
            overlay.remove();
            popup.remove();
            targetCard.classList.remove('highlight');
            targetCard.style.zIndex = '';
            targetCard.style.position = '';
            document.removeEventListener('click', cardClickHandler);
        }
    }
    
    document.addEventListener('click', cardClickHandler);
    
    // Add cancel button that floats near the profile
    if (targetCard) {
        const cancelBtn = document.createElement('button');
        cancelBtn.className = 'popup-btn close-btn';
        cancelBtn.textContent = 'Cancel';
        cancelBtn.style.position = 'absolute';
        cancelBtn.style.top = `${targetCard.offsetTop + targetCard.offsetHeight + 10}px`;
        cancelBtn.style.left = `${targetCard.offsetLeft}px`;
        cancelBtn.style.width = `${targetCard.offsetWidth}px`;
        cancelBtn.style.zIndex = '1001';
        cancelBtn.id = 'cancelSelectionBtn';
        document.body.appendChild(cancelBtn);
        
        cancelBtn.addEventListener('click', () => {
            overlay.remove();
            popup.remove();
            targetCard.classList.remove('highlight');
            targetCard.style.zIndex = '';
            targetCard.style.position = '';
            cancelBtn.remove();
            document.removeEventListener('click', cardClickHandler);
        });
    }
}

function revealSpicyPhoto(profileId) {
    const card = document.querySelector(`.profile-card[data-id="${profileId}"]`);
    if (!card || !spicyPhotos[profileId]) return;
    
    // Store original content and styles
    const originalContent = card.innerHTML;
    const originalZIndex = card.style.zIndex;
    const originalPosition = card.style.position;
    
    // Bring card to front
    card.style.zIndex = '1001';
    card.style.position = 'relative';
    
    // Flip to spicy photo
    card.innerHTML = `
        <img src="${spicyPhotos[profileId]}" alt="Spicy photo" 
            style="width: 100%; height: 100%; object-fit: cover;">
    `;
    card.style.backgroundColor = 'var(--grindr-pink)';
    
    // Flip back after 4 seconds
    setTimeout(() => {
        card.innerHTML = originalContent;
        card.style.backgroundColor = '';
        card.style.zIndex = originalZIndex;
        card.style.position = originalPosition;
    }, 900);
}

function revealAllSpicy() {
    // Flip all cards to spicy photos
    profiles.forEach(profile => {
        const card = document.querySelector(`.profile-card[data-id="${profile.id}"]`);
        if (card && spicyPhotos[profile.id]) {
            // Store original content
            const originalContent = card.innerHTML;
            
            // Flip to spicy photo
            card.innerHTML = `
                <img src="${spicyPhotos[profile.id]}" alt="Spicy photo" 
                    style="width: 100%; height: 100%; object-fit: cover;">
            `;
            card.style.backgroundColor = 'var(--grindr-pink)';
            
            // Flip back after 4 seconds
            setTimeout(() => {
                card.innerHTML = originalContent;
                card.style.backgroundColor = '';
            }, 900);
        }
    });
}
document.getElementById('switchBtn').addEventListener('click', function() {
    const currentTime = Date.now();
    if (currentTime - lastRevealTime < revealCooldown) {
        const remainingMinutes = Math.ceil((revealCooldown - (currentTime - lastRevealTime))) / 60000;
        alert(`Please wait ${remainingMinutes.toFixed(1)} minutes before using Reveal Spicey again.`);
        return;
    }
    
    showPlayerSelection();
    lastRevealTime = currentTime;
});



    // Sample profile data with Grindr-style attributes
    const profiles = [
        { id: 1, name: "Franco Stemmet", age: 19, img: "pics/FrancoS.jpeg", tag: "Bottom, maybe keen to top", status: "Group fun" },
        { id: 2, name: "Liam", age: 24, img: "pics/Liam.jpg", tag: "Top", status: "Looking for fun" },
        { id: 3, name: "Christoff", age: 26, img: "pics/Christoff.jpg", tag: "Bottom", status: "Friends first" },  
        { id: 4, name: "Christiaan", age: 25, img: "pics/Christiaan.jpeg", tag: "Vers", status: "Right now" },
        { id: 5, name: "Schalk", age: 21, img: "pics/Schalk1.jpg", tag: "Top, maybe keen to bottom", status: "DTF" },
        { id: 6, name: "Uli", age: 23, img: "pics/Uli.jpg", tag: "Bottom", status: "NSA" },
        { id: 7, name: "Paul", age: 24, img: "pics/Paul.jpg", tag: "Top, maybe keen to bottom", status: "Traveling" },
        { id: 8, name: "Robbie", age: 20, img: "pics/Robbie.jpg", tag: "Bottom", status: "Chat first", additionalImgs: ["pics/Robbie1.jpg", "pics/Robbie3.jpg", "pics/Robbie3.jpg"] } // Add your actual image paths
    ];

    // Game state
    let gameState = {
        activeGame: null,
        inactiveProfiles: [],
        spinBottle: {
            asker: null,
            askedProfiles: [],
            currentPair: null // Track current asker/answerer pair
        }
    };

    // DOM elements
    const profileGrid = document.getElementById('profileGrid');
    const randomPickerBtn = document.getElementById('randomPickerBtn');
    const spinBottlePart1Btn = document.getElementById('spinBottlePart1Btn');
    const spinBottlePart2Btn = document.getElementById('spinBottlePart2Btn');
    const resetGameBtn = document.getElementById('resetGameBtn');
    const gameResults = document.getElementById('gameResults');
    
    // Create pair display element
    const pairDisplay = document.createElement('div');
    pairDisplay.className = 'pair-display';
    pairDisplay.style.position = 'fixed';
    pairDisplay.style.top = '20px';
    pairDisplay.style.left = '20px';
    pairDisplay.style.backgroundColor = 'var(--grindr-dark)';
    pairDisplay.style.border = '2px solid var(--grindr-yellow)';
    pairDisplay.style.borderRadius = '10px';
    pairDisplay.style.padding = '15px';
    pairDisplay.style.zIndex = '1000';
    pairDisplay.style.display = 'none';
    document.body.appendChild(pairDisplay);

    // Initialize the profile grid
    function initProfileGrid() {
        profileGrid.innerHTML = '';
        profiles.forEach(profile => {
            const profileEl = document.createElement('div');
            profileEl.className = 'profile-card';
            profileEl.dataset.id = profile.id;
            profileEl.innerHTML = `
                <div class="profile-tag">${profile.tag}</div>
                <img src="${profile.img}" alt="${profile.name}" class="profile-img">
                <div class="profile-info">
                    <div class="profile-name-card">${profile.name}, ${profile.age}</div>
                    <div class="profile-status">${profile.status}</div>
                </div>
            `;
            profileGrid.appendChild(profileEl);
        });
    }

    // Update pair display
    function updatePairDisplay(asker, answerer) {
        if (asker && answerer) {
            pairDisplay.innerHTML = `
                <div style="color: var(--grindr-yellow); font-weight: bold; margin-bottom: 10px;">Current Pair</div>
                <div style="margin-bottom: 5px;"><span style="color: var(--grindr-blue);">Asker:</span> ${asker.name}</div>
                <div><span style="color: var(--grindr-blue);">Answerer:</span> ${answerer.name}</div>
            `;
            pairDisplay.style.display = 'block';
        } else {
            pairDisplay.style.display = 'none';
        }
    }

    // Get active profiles for current game
    function getActiveProfiles() {
        if (gameState.activeGame === 'randomPicker') {
            return profiles.filter(p => !gameState.inactiveProfiles.includes(p.id));
        } else if (gameState.activeGame === 'spinBottle') {
            if (!spinBottlePart2Btn.disabled) {
                return profiles.filter(p => 
                    p.id !== gameState.spinBottle.asker && 
                    !gameState.spinBottle.askedProfiles.includes(p.id)
                );
            }
            return profiles;
        }
        return profiles;
    }

    // Flash animation through profiles before selection
    async function flashProfiles(activeProfiles, duration = 1500) {
        const startTime = Date.now();
        const flashInterval = 100; // ms between flashes
        
        while (Date.now() - startTime < duration) {
            const randomIndex = Math.floor(Math.random() * activeProfiles.length);
            const profileId = activeProfiles[randomIndex].id;
            const profileEl = document.querySelector(`.profile-card[data-id="${profileId}"]`);
            
            profileEl.classList.add('flash');
            setTimeout(() => profileEl.classList.remove('flash'), flashInterval - 10);
            
            await new Promise(r => setTimeout(r, flashInterval));
        }
    }

    // Pick random profile with flash animation
    async function pickRandomProfile() {
        const activeProfiles = getActiveProfiles();
        
        if (activeProfiles.length === 0) {
            if (gameState.activeGame === 'randomPicker') {
                showResult('No active profiles left to pick from!');
            } else {
                const askerName = getProfileName(gameState.spinBottle.asker);
                showFinalPopup(askerName);
                resetSpinBottle();
            }
            return null;
        }
        
        // Flash through profiles
        await flashProfiles(activeProfiles);
        
        // Select final profile
        const randomIndex = Math.floor(Math.random() * activeProfiles.length);
        const selectedProfile = activeProfiles[randomIndex];
        const profileEl = document.querySelector(`.profile-card[data-id="${selectedProfile.id}"]`);
        
        profileEl.classList.add('highlight');
        setTimeout(() => profileEl.classList.remove('highlight'), 3000);
        
        return selectedProfile;
    }

    // Show big selection popup
    function showSelectionPopup(title, name, showChallengeButton = false) {
        const popup = document.createElement('div');
        popup.className = 'selection-popup';
        popup.innerHTML = `
            <div class="selection-title">${title}</div>
            <div class="selection-name">${name}</div>
            <div class="selection-buttons">
                ${showChallengeButton ? 
                    `<button class="popup-btn challenge-btn" id="giveChallengeBtn">Give Challenge</button>` : ''}
                <button class="popup-btn close-btn" id="closePopupBtn">Continue</button>
            </div>
        `;
        
        const overlay = document.createElement('div');
        overlay.className = 'overlay';
        
        document.body.appendChild(overlay);
        document.body.appendChild(popup);
        
        if (showChallengeButton) {
            document.getElementById('giveChallengeBtn').addEventListener('click', () => {
                showResult(`${name}'s challenge: ${getRandomChallenge()}`);
                closePopup();
            });
        }
        
        document.getElementById('closePopupBtn').addEventListener('click', closePopup);
        
        function closePopup() {
            overlay.remove();
            popup.remove();
        }
    }

    // Show final popup when only one player remains
    function showFinalPopup(name) {
        const popup = document.createElement('div');
        popup.className = 'selection-popup';
        popup.innerHTML = `
            <div class="selection-title">Final Challenge!</div>
            <div class="selection-name">${name}</div>
            <div class="result-text">${getRandomChallenge()}</div>
            <div class="selection-buttons">
                <button class="popup-btn close-btn" id="closePopupBtn">Continue</button>
            </div>
        `;
        
        const overlay = document.createElement('div');
        overlay.className = 'overlay';
        
        document.body.appendChild(overlay);
        document.body.appendChild(popup);
        
        document.getElementById('closePopupBtn').addEventListener('click', () => {
            overlay.remove();
            popup.remove();
        });
    }

    // Get random challenge/dare
    function getRandomChallenge() {
        const challenges = [
            "Take off one piece of clothing",
            "Give a lap dance to someone of your choice",
            "Kiss the person to your left",
            "Show us your best sexy dance move",
            "Tell us your wildest fantasy",
            "Let someone draw on your body with a marker",
            "Do a body shot off someone",
            "Whisper something sexy in someone's ear",
            "Let the group decide your next action",
            "Swap an article of clothing with someone",
            "Give everyone a compliment about their appearance",
            "Show us your best pickup line",
            "Let someone blindfold you and feed you something",
            "Describe your ideal partner in detail",
            "Act out your favorite sex position (clothes on!)"
        ];
        return challenges[Math.floor(Math.random() * challenges.length)];
    }

    // Show result in game results area
    function showResult(text) {
        gameResults.querySelector('.result-text').textContent = text;
    }

    // Get profile name by ID
    function getProfileName(profileId) {
        const profile = profiles.find(p => p.id === profileId);
        return profile ? profile.name : 'Unknown';
    }

    // Reset random picker
    function resetRandomPicker() {
        gameState.inactiveProfiles = [];
        showResult('All profiles have been reset and are available for selection.');
    }

    // Reset spin the bottle
    function resetSpinBottle() {
        gameState.spinBottle = { 
            asker: null, 
            askedProfiles: [],
            currentPair: null
        };
        pairDisplay.style.display = 'none';
        spinBottlePart1Btn.disabled = false;
        spinBottlePart2Btn.disabled = true;
    }

    // Reset both games
    function resetAllGames() {
        resetRandomPicker();
        resetSpinBottle();
        gameState.activeGame = null;
        showResult('Game has been reset. Select a game mode to begin.');
    }

    // Event listeners
    randomPickerBtn.addEventListener('click', async function() {
        gameState.activeGame = 'randomPicker';
        spinBottlePart1Btn.disabled = true;
        spinBottlePart2Btn.disabled = true;
        
        const selectedProfile = await pickRandomProfile();
        if (selectedProfile) {
            showSelectionPopup('Randomly Selected', selectedProfile.name, true);
        }
    });

    spinBottlePart1Btn.addEventListener('click', async function() {
        gameState.activeGame = 'spinBottle';
        const asker = await pickRandomProfile();
        if (asker) {
            gameState.spinBottle.asker = asker.id;
            showSelectionPopup('Asker Selected', asker.name);
            spinBottlePart1Btn.disabled = true;
            spinBottlePart2Btn.disabled = false;
        }
    });

    spinBottlePart2Btn.addEventListener('click', async function() {
        const answerer = await pickRandomProfile();
        if (answerer) {
            gameState.spinBottle.askedProfiles.push(answerer.id);
            const asker = profiles.find(p => p.id === gameState.spinBottle.asker);
            gameState.spinBottle.currentPair = { asker, answerer };
            updatePairDisplay(asker, answerer);
            
            showSelectionPopup(`${asker.name} asks...`, answerer.name, true);
            
            if (gameState.spinBottle.askedProfiles.length >= profiles.length - 1) {
                setTimeout(() => {
                    showFinalPopup(asker.name);
                    resetSpinBottle();
                }, 3000);
            } else {
                spinBottlePart1Btn.disabled = false;
                spinBottlePart2Btn.disabled = true;
                gameState.spinBottle.asker = null;
            }
        }
    });

    resetGameBtn.addEventListener('click', resetAllGames);

    // Initialize the app
    initProfileGrid();

    // Add this function to handle the slideshow
function startRobbieSlideshow() {
    const robbieProfile = profiles.find(p => p.id === 8);
    if (!robbieProfile || !robbieProfile.additionalImgs) return;
    
    const robbieCard = document.querySelector('.profile-card[data-id="8"]');
    if (!robbieCard) return;
    
    const originalImg = robbieProfile.img;
    const allImgs = [originalImg, ...robbieProfile.additionalImgs];
    let currentIndex = 0;
    
    // Store original content so we can restore it
    const originalContent = robbieCard.innerHTML;
    
    // Function to update the image
    function updateImage() {
        const imgElement = robbieCard.querySelector('.profile-img');
        if (imgElement) {
            imgElement.src = allImgs[currentIndex];
        }
        currentIndex = (currentIndex + 1) % allImgs.length;
    }
    
    // Start slideshow (change every 3 seconds)
    const slideshowInterval = setInterval(updateImage, 2000);
    
    // Clean up when card is clicked or when showing spicy pic
    function stopSlideshow() {
        clearInterval(slideshowInterval);
        const imgElement = robbieCard.querySelector('.profile-img');
        if (imgElement) {
            imgElement.src = originalImg;
        }
        robbieCard.removeEventListener('click', stopSlideshow);
    }
    
    robbieCard.addEventListener('click', stopSlideshow);
    
    // Also stop when showing spicy pic
    const switchBtn = document.getElementById('switchBtn');
    switchBtn.addEventListener('click', stopSlideshow);
}

// Call this function after initProfileGrid()
initProfileGrid();
startRobbieSlideshow();

// Task database (PG-13 only)
const tasks = [
    " Name a celebrity you would want to have a one-night stand with",
" Take a body shot of the person to your left",
" Do a seductive dance for 30 seconds",
" Call your ex and tell them you miss the sex",
" Give a lap dance to the person across from you",
" Do an impression of your favorite porn star",
" Moan the alphabet",
" Blindfold one person and give them a kiss on the cheek",
" Reveal which person in the room youâ€™d consider having a threesome with",
" Name three body parts you love about yourself",
" Take a shot of hot sauce directly into your mouth",
" Share a sexual fantasy you have never told anyone before",
" Give a striptease to the person of your choice",
" Have a staring contest with the person to your right",
" French kiss a person of your choice for one minute straight",
" Reveal how many sex toys do you own",
" Share the most embarrassing thing thatâ€™s happened to you during sex",
" Show us your best twerking moves",
" Name a fantasy role-play scenario you would like to try in the bedroom",
" Disclose how many people youâ€™ve slept with",
" Give a sensual massage to the person sitting next to you",
" Upload a provocative photo on social media of your choice",
" Name a body part you find attractive in the person sitting across from you",
" Take off a piece of clothing for every year youâ€™ve been sexually active",
" Share when you first started masturbating",
" Take a sexy selfie and send it to the 3rd person on your contact list",
" Give a lap dance to the person on your left",
" Lick whipped cream off of someoneâ€™s body part of their choice",
" Share the details of your most recent hookup",
" Give a sensual massage to the person sitting across from you",
" Take off an item of clothing and keep it off for the rest of the game",
" Switch clothes with the person to your right for the next three rounds",
" Do a striptease for one minute, using only one piece of clothing",
" Walk up to a stranger and ask for their number",
" Give your number to a stranger",
" Have the group choose a person and lick their belly button",
" Show us a nude photo youâ€™ve taken",
" Give a hickey to the player on your right",
" Share the most scandalous thing youâ€™ve ever done in a public place",
" Lick whipped cream off of someoneâ€™s body part of your choice, blindfolded",
" Swap your underwear with the player on your left",
" Dial your 5th contact and proposition them for sex",
" Reveal your favorite sexual position",
" Give the person on your right a sensual massage for five minutes",
" Open up about your biggest turn-on",
" Share a secret fetish or fantasy youâ€™ve never told anyone",
" Kiss the first person you make eye contact with after reading this dare",
" Send a sext to the last person in your phoneâ€™s call log",
" Play a round of the game naked",
" Ask the person to your left to spank you",
" Hand over your phone and let the group send a text to anyone in your contacts",
" Reveal the most embarrassing thing in your browser history",
" Act out your best orgasm",
" Name an ex of a friend youâ€™d have sex with",
" Run an ice cube over your lips, neck, and inner thighs",
" Pick another player and have them lick your ear",
" Show everyone your last-watched porn",
" Reveal the sexiest feature in a person youâ€™re attracted to",
" Record yourself moaning and send it to the second person in your contacts that comes up after you type â€˜S",
" Describe the sexiest clothes you ever wore and why"

];

// Random task generator function
async function generateRandomTask() {
    // Disable all game buttons during selection
    document.querySelectorAll('.profile-list-item').forEach(btn => btn.disabled = true);
    
    // Flash through all profiles
    await flashProfiles(profiles, 2000);
    
    // Select random profile and task
    const randomProfile = profiles[Math.floor(Math.random() * profiles.length)];
    const randomTask = tasks[Math.floor(Math.random() * tasks.length)];
    
    // Create popup
    const popup = document.createElement('div');
    popup.className = 'selection-popup';
    popup.innerHTML = `
        <div class="selection-title">ðŸŽ² RANDOM TASK ðŸŽ²</div>
        <div class="selection-name">${randomProfile.name}</div>
        <div style="color: white; font-size: 24px; margin: 20px 0;">${randomTask}</div>
        <div class="selection-buttons">
            <button class="popup-btn challenge-btn" id="newTaskBtn">New Task</button>
            <button class="popup-btn close-btn" id="closeTaskBtn">Close</button>
        </div>
    `;
    
    const overlay = document.createElement('div');
    overlay.className = 'overlay';
    
    document.body.appendChild(overlay);
    document.body.appendChild(popup);
    
    // Highlight the selected profile
    const profileCard = document.querySelector(`.profile-card[data-id="${randomProfile.id}"]`);
    if (profileCard) {
        profileCard.classList.add('highlight');
        setTimeout(() => profileCard.classList.remove('highlight'), 3000);
    }
    
    // Button event listeners
    document.getElementById('newTaskBtn').addEventListener('click', () => {
        overlay.remove();
        popup.remove();
        generateRandomTask();
    });
    
    document.getElementById('closeTaskBtn').addEventListener('click', () => {
        overlay.remove();
        popup.remove();
        document.querySelectorAll('.profile-list-item').forEach(btn => btn.disabled = false);
    });
}

// Add event listener for the new button
document.getElementById('randomTaskBtn').addEventListener('click', generateRandomTask);



// Group reveal 

// Get random challenge/dare
    function getRandomChallengeGroup() {
        const challenges = [
            "7 Mins in Heaven",
            "Body Shot - both ways",
            "Serenade",
            "Spin the bottle!",
            "Blindfolded touching",
            "How much money would it take you to fuck this person right now/tonight? Both Answer",
            "Kiss? If not, group decide on a punishment",
            "Whisper something sexy in someone's ear",
            "Let the group decide your next action",
            "Sit on each others laps",
            "Complement each other and then every other person in the room",
            "Show us your best pickup line",
            "Would you fuck 2 people from you left and right, both answer?",
            "Whats something you wish you never did and something you did that you wished you never done. Dont make it dark.",
            "Act out your favorite sex position (clothes optional?)",
            "Take a body shot off the person to your left",

            "Whisper your wildest fantasy to your partner",
            "Remove one piece of clothing from each other here on alone or take two shots",
            "Nominate two other players to join you for 7 mins in heaven - if anyone says no, they nominate 2 new people and take 2 shots!",
            "Kiss the neck of the other person",
            "Hypothetically, would you marry this person?",
            "Nominate max two players to complete a task of your choosing",
            "Tell the group your favorite sex position and why",
            "Blind fold the other person and send them into a room, send someone else in the room to kiss them, if they come out and guessed correctly, you loose and take 4 shots",
            "Describe in detail your last steamy dream to each other like its wedding vows",
            "Send a flirty text to someone in the group rn",
            "Demonstrate your best 'O' face for 5 seconds",
            "Make out with someone/each other for 10 seconds or drink twice",
            "Share the kinkiest thing you've ever done with the group â€”or drink",
            "Let them bite your earlobe or inner thigh",
            "Make up your own game",
            "You two are alone on an island, choose 2 other people to join you and motivate why"
        ];
        return challenges[Math.floor(Math.random() * challenges.length)];
    }
// Player options mapping (playerId: [option1Id, option2Id, option3Id, option4Id])
const playerOptions = {
    4: [7, 2, 8, 1],    // Christiaan: Paul, Liam, Robbie, Franco
    3: [2, 6, 1, 8],    // Christoff: Liam, Uli, Franco, Robbie
    1: [8, 2, 3, 7],    // Franco: Robbie, Liam, Christoff, Paul
    2: [3, 8, 6, 5],    // Liam: Christoff, Robbie, Uli, Schalk
    7: [4, 8, 6, 2],    // Paul: Christiaan, Robbie, Uli, Liam
    8: [1, 2, 3, 6],    // Robbie: Franco, Liam, Christoff, Uli
    5: [6, 3, 2, 1],    // Schalk: Uli, Christoff, Liam, Franco
    6: [2, 3, 5, 7]     // Uli: Liam, Christoff, Schalk, Paul
};

// Reveal Game state
let revealGameState = {
    currentPlayer: null,
    options: [],
    revealedOptions: [],
    selectedOption: null
};

// Function to start the reveal game
async function startRevealGame() {
    // Show player selection popup (for Game Master)
    const popup = document.createElement('div');
    popup.className = 'selection-popup';
    popup.innerHTML = `
        <div class="selection-title">Select a Player</div>
        <div style="color: white; margin-bottom: 15px;">Choose who will select their partner:</div>
        <div class="selection-buttons" style="flex-direction: column; gap: 10px;">
            ${profiles.map(profile => `
                <button class="popup-btn" data-id="${profile.id}" 
                    style="width: 100%; text-align: center;">
                    ${profile.name}
                </button>
            `).join('')}
            <button class="popup-btn close-btn" id="cancelRevealGameBtn" 
                style="width: 100%; text-align: center;">
                Cancel
            </button>
        </div>
    `;
    
    const overlay = document.createElement('div');
    overlay.className = 'overlay';
    
    document.body.appendChild(overlay);
    document.body.appendChild(popup);
    
    // Add event listeners to all player buttons
    profiles.forEach(profile => {
        document.querySelector(`.popup-btn[data-id="${profile.id}"]`).addEventListener('click', () => {
            overlay.remove();
            popup.remove();
            setupPartnerSelection(profile);
        });
    });
    
    // Add event listener for cancel
    document.getElementById('cancelRevealGameBtn').addEventListener('click', () => {
        overlay.remove();
        popup.remove();
    });
}

// Setup the partner selection for the chosen player
function setupPartnerSelection(selectedPlayer) {
    revealGameState = {
        currentPlayer: selectedPlayer,
        options: [],
        revealedOptions: [],
        selectedOption: null
    };
    
    // Get the predefined options for this player and shuffle them
    const optionIds = playerOptions[selectedPlayer.id];
    const shuffledOptionIds = [...optionIds].sort(() => 0.5 - Math.random());
    revealGameState.options = shuffledOptionIds.map(id => profiles.find(p => p.id === id));
    
    // Highlight the selected player's card
    const playerCard = document.querySelector(`.profile-card[data-id="${selectedPlayer.id}"]`);
    if (playerCard) {
        playerCard.classList.add('highlight');
    }
    
    // Show the options popup
    const popup = document.createElement('div');
    popup.className = 'selection-popup';
    popup.innerHTML = `
        <div class="selection-title">${selectedPlayer.name}, choose your partner</div>
        <div style="color: white; margin-bottom: 15px;">
            Reveal options or select a revealed partner
        </div>
        <div id="optionsContainer" class="selection-buttons" style="flex-direction: column; gap: 10px;">
            ${revealGameState.options.map((option, index) => `
                <button class="popup-btn option-btn" data-id="${option.id}" 
                    style="width: 100%; text-align: center; background-color: var(--grindr-navy);">
                    Option ${String.fromCharCode(65 + index)} (Click to Reveal)
                </button>
            `).join('')}
        </div>
        <div id="selectionControls" style="margin-top: 15px; ${revealGameState.selectedOption ? '' : 'display: none;'}">
            <div style="color: var(--grindr-yellow); margin-bottom: 10px;">
                ${revealGameState.selectedOption ? 
                    `Selected: ${profiles.find(p => p.id === revealGameState.selectedOption).name}` : 
                    'Select a revealed partner'}
            </div>
            <div class="selection-buttons">
                <button class="popup-btn" id="confirmSelectionBtn" 
                    style="background-color: var(--grindr-teal);"
                    ${revealGameState.selectedOption ? '' : 'disabled'}>
                    Confirm Selection
                </button>
                <button class="popup-btn close-btn" id="cancelRevealOptionsBtn">
                    Cancel
                </button>
            </div>
        </div>
    `;
    
    const overlay = document.createElement('div');
    overlay.className = 'overlay';
    
    document.body.appendChild(overlay);
    document.body.appendChild(popup);
    
    // Add event listeners to option buttons
    document.querySelectorAll('.option-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const optionId = parseInt(this.dataset.id);
            const optionProfile = profiles.find(p => p.id === optionId);
            
            // Reveal this option if not already revealed
            if (!revealGameState.revealedOptions.includes(optionId)) {
                this.textContent = `${optionProfile.name}`;
                this.style.backgroundColor = 'var(--grindr-purple)';
                revealGameState.revealedOptions.push(optionId);
            }
            
            // Allow selecting any revealed option
            if (revealGameState.revealedOptions.includes(optionId)) {
                // Mark as selected
                revealGameState.selectedOption = optionId;
                
                // Update UI
                document.querySelectorAll('.option-btn').forEach(b => {
                    b.style.border = b.dataset.id === optionId.toString() ? 
                        '3px solid var(--grindr-yellow)' : 'none';
                });
                
                // Enable confirm button
                document.getElementById('confirmSelectionBtn').disabled = false;
                document.getElementById('selectionControls').style.display = 'block';
                document.querySelector('#selectionControls div').textContent = 
                    `Selected: ${optionProfile.name}`;
            }
        });
    });
    
    // Confirm selection button
    document.getElementById('confirmSelectionBtn').addEventListener('click', function() {
        if (!revealGameState.selectedOption) return;
        
        const selectedProfile = profiles.find(p => p.id === revealGameState.selectedOption);
        const currentPlayer = revealGameState.currentPlayer;
        
        // Close current popup
        overlay.remove();
        popup.remove();
        
        // Remove highlight from player card
        if (playerCard) playerCard.classList.remove('highlight');
        
        // Show task assignment popup to Game Master
        const taskPopup = document.createElement('div');
        taskPopup.className = 'selection-popup';
        taskPopup.innerHTML = `
            <div class="selection-title">Task Assignment</div>
            <div style="color: white; margin: 15px 0;">
                <span style="color: var(--grindr-yellow);">${currentPlayer.name}</span> selected 
                <span style="color: var(--grindr-blue);">${selectedProfile.name}</span> as partner
            </div>
            <div style="color: white; margin-bottom: 20px; font-size: 18px;">
                ${getRandomChallengeGroup()}
            </div>
            <div class="selection-buttons">
                <button class="popup-btn challenge-btn" id="newTaskBtn">New Task</button>
                <button class="popup-btn close-btn" id="closeTaskBtn">Continue</button>
            </div>
        `;
        
        document.body.appendChild(taskPopup);
        
        // New task button
        document.getElementById('newTaskBtn').addEventListener('click', function() {
            taskPopup.querySelector('div:nth-child(3)').textContent = getRandomChallengeGroup();
        });
        
        // Close task popup
        document.getElementById('closeTaskBtn').addEventListener('click', function() {
            taskPopup.remove();
        });
    });
    
    // Cancel button
    document.getElementById('cancelRevealOptionsBtn').addEventListener('click', () => {
        // Remove highlight from player card
        if (playerCard) playerCard.classList.remove('highlight');
        overlay.remove();
        popup.remove();
    });
}

  

// Add event listener for the reveal game button
document.getElementById('revealGameBtn').addEventListener('click', startRevealGame);
</script>
</body>
</html>
